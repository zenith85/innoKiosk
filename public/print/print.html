<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Print</title>
  <link rel="stylesheet" href="/print/print.css" />
</head>
<body>

<div class="receipt">

  <!-- ELEMENT 1: HEADER -->
  <section class="header">
    <p class="subtitle">국내 다양한 서점사업 이용이 가능한</p>
    <h1 class="title">이노스페이스원<br/>이북리더기!</h1>
  </section>

  <!-- ELEMENT 2: DEVICE (ONE ONLY) -->
  <section class="device">
    <img id="device-img" src="/img/print/luna.png" alt="device" />
    <p id="device-name" class="device-name">LUNA</p>
    <p id="device-desc" class="device-desc">
      화이트 감성이 더해진<br/>6인치 루나
    </p>
  </section>

  <!-- ELEMENT 3: FOOTER -->
  <section class="footer">
    <img src="/img/print/logo.png" class="logo" />
    <div class="qr">
      <img src="/img/print/qr.png" />
      <p>공식 홈페이지<br/>다양한 혜택받기</p>
    </div>
  </section>

</div>

<script>
  /* ================= DEVICE MAP ================= */

  const DEVICE_MAP = {
    A: {
      img: "/img/print/luna.png",
      name: "LUNA",
      desc: "화이트 감성이 더해진<br/>6인치 루나"
    },
    B: {
      img: "/img/print/lunax.png",
      name: "LUNA X",
      desc: "강력한 성능의<br/>6인치 루나X"
    },
    C: {
      img: "/img/print/mars.png",
      name: "MARS",
      desc: "몰입형 대화면<br/>7인치 마스"
    },
    D: {
      img: "/img/print/mars10.png",
      name: "MARS10",
      desc: "작업까지 가능한<br/>10인치 마스10"
    }
  };

  /* ================= TYPE → DEVICE ================= */

  const params = new URLSearchParams(window.location.search);
  const type = params.get("type") || "";

  // rule: use LAST answer letter
  const key = type.slice(-1);
  const device = DEVICE_MAP[key] || DEVICE_MAP.A;

  document.getElementById("device-img").src = device.img;
  document.getElementById("device-name").innerHTML = device.name;
  document.getElementById("device-desc").innerHTML = device.desc;

  /* ================= PRINT & RESTART ================= */

  window.print();

  window.onafterprint = () => {
    window.location.href = "/";
  };

  setTimeout(() => {
    window.location.href = "/";
  }, 3000);
</script>

</body>
</html>